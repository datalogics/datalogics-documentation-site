[build]
  command = "bun run build:prod"
  publish = "dist"

[build.environment]
  NODE_OPTIONS = "--max-old-space-size=8192"
  NODE_VERSION = "22"

# Studio routes need SSR (everything else is pre-rendered static)
[[redirects]]
  from = "/__nuxt_studio/*"
  to = "/.netlify/functions/server"
  status = 200
  force = true

[[redirects]]
  from = "/_studio/*"
  to = "/.netlify/functions/server"
  status = 200
  force = true

[[redirects]]
  from = "/api/studio/*"
  to = "/.netlify/functions/server"
  status = 200
  force = true